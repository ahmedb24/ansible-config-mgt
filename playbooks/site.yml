---
- name: Include dynamic variables
- hosts: all
  tasks:
  import_playbook: ../static-assignments/common.yml
  include: ../dynamic-assignments/env-vars.yml
  tags:
      - always

- name: Database assignment
- hosts: db
  import_playbook: ../static-assignments/database.yml
  when: db_is_required 

- name: Webserver assignment
- hosts: uat-webservers
  import_playbook: ../static-assignments/uat-webservers.yml

- name: Loadbalancers assignment
  hosts: lb
  import_playbook: ../static-assignments/loadbalancers.yml
  when: load_balancer_is_required 